<!doctype html>
<!--[if !IE]>
<html class="no-js non-ie" lang="en-US"> <![endif]-->
<!--[if IE 7 ]>
<html class="no-js ie7" lang="en-US"> <![endif]-->
<!--[if IE 8 ]>
<html class="no-js ie8" lang="en-US"> <![endif]-->
<!--[if IE 9 ]>
<html class="no-js ie9" lang="en-US"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->
<head>
<base href="https://lpplmarketwatch.com" />

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="">
<link rel="profile" href="http://gmpg.org/xfn/11">

<title>LPPL Market Watch &#8211; Blog of The Bubble Index</title>
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="LPPL Market Watch &raquo; Feed" href="https://lpplmarketwatch.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="LPPL Market Watch &raquo; Comments Feed" href="https://lpplmarketwatch.com/comments/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/lpplmarketwatch.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.9.2"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56794,8205,9794,65039],[55358,56794,8203,9794,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='sparkling-bootstrap-css'  href='https://lpplmarketwatch.com/wp-content/themes/sparkling/assets/css/bootstrap.min.css?ver=4.9.2' type='text/css' media='all' />
<link rel='stylesheet' id='sparkling-icons-css'  href='https://lpplmarketwatch.com/wp-content/themes/sparkling/assets/css/font-awesome.min.css?ver=4.9.2' type='text/css' media='all' />
<link rel='stylesheet' id='sparkling-fonts-css'  href='//fonts.googleapis.com/css?family=Open+Sans%3A400italic%2C400%2C600%2C700%7CRoboto+Slab%3A400%2C300%2C700&#038;ver=4.9.2' type='text/css' media='all' />
<link rel='stylesheet' id='sparkling-style-css'  href='https://lpplmarketwatch.com/wp-content/themes/sparkling/style.css?ver=4.9.2' type='text/css' media='all' />
<script type='text/javascript' src='https://lpplmarketwatch.com/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='https://lpplmarketwatch.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script type='text/javascript' src='https://lpplmarketwatch.com/wp-content/themes/sparkling/assets/js/vendor/modernizr.min.js?ver=4.9.2'></script>
<script type='text/javascript' src='https://lpplmarketwatch.com/wp-content/themes/sparkling/assets/js/vendor/bootstrap.min.js?ver=4.9.2'></script>
<script type='text/javascript' src='https://lpplmarketwatch.com/wp-content/themes/sparkling/assets/js/functions.min.js?ver=4.9.2'></script>
<link rel='https://api.w.org/' href='https://lpplmarketwatch.com/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://lpplmarketwatch.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://lpplmarketwatch.com/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.9.2" />
<style type="text/css"></style>		<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
		
</head>

<body class="home blog">
<a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>
<div id="page" class="hfeed site">

	<header id="masthead" class="site-header" role="banner">
		<nav class="navbar navbar-default " role="navigation">
			<div class="container">
				<div class="row">
					<div class="site-navigation-inner col-sm-12">
						<div class="navbar-header">
							<button type="button" class="btn navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
								<span class="sr-only">Toggle navigation</span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
							</button>

														<div id="logo">
															<h1 class="site-name">																		<a class="navbar-brand" href="https://lpplmarketwatch.com/" title="LPPL Market Watch" rel="home">LPPL Market Watch</a>
																</h1>																													</div><!-- end of #logo -->
						</div>
											</div>
				</div>
			</div>
		</nav><!-- .site-navigation -->
	</header><!-- #masthead -->

	<div id="content" class="site-content">

		<div class="top-section">
								</div>

		<div class="container main-content-area">
						<div class="row side-pull-left">
				<div class="main-content-inner col-sm-12 col-md-8">

	<div id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		
<article id="post-696" class="post-696 post type-post status-publish format-standard hentry category-code category-three-js category-website">
	<div class="blog-item-wrap">
				<a href="https://lpplmarketwatch.com/2015/07/31/three-js-3d-contour-plot-part-1/" title="Three.js 3D Contour Plot &#8211; Part 1" >
							</a>
		<div class="post-inner-content">
			<header class="entry-header page-header">

				<h2 class="entry-title"><a href="https://lpplmarketwatch.com/2015/07/31/three-js-3d-contour-plot-part-1/" rel="bookmark">Three.js 3D Contour Plot &#8211; Part 1</a></h2>

								<div class="entry-meta">
					<span class="posted-on"><i class="fa fa-calendar"></i> <a href="https://lpplmarketwatch.com/2015/07/31/three-js-3d-contour-plot-part-1/" rel="bookmark"><time class="entry-date published" datetime="2015-07-31T01:38:37+00:00">July 31, 2015</time></a></span><span class="byline"> <i class="fa fa-user"></i> <span class="author vcard"><a class="url fn n" href="https://lpplmarketwatch.com/author/lpplmarketwatch/">lpplmarketwatch</a></span></span>				<span class="comments-link"><i class="fa fa-comment-o"></i><a href="https://lpplmarketwatch.com/2015/07/31/three-js-3d-contour-plot-part-1/#respond">Leave a comment</a></span>
				
				
				</div><!-- .entry-meta -->
							</header><!-- .entry-header -->

						<div class="entry-content">

				<p>Three.js is a powerful tool for visualizing a wide variety of objects including mathematical data. The JavaScript based API greatly simplifies the creation and manipulation of WebGL graphic objects. This post is the first in a series which describe the creation of <a href="https://lpplmarketwatch.com/3d-contour-examples/" target="_blank">The Bubble Index 3D Contours</a>. The first step is to check if the user&#8217;s device supports WebGL. The <code>Detector</code> variable comes from <a href="http://alteredqualia.com/" target="_blank">AlteredQualia</a> and <a href="http://mrdoob.com/" target="_blank">Mr.Doob</a>. If the device supports WebGL, it is time to initialize variables:</p>
<pre><code>if ( ! Detector.webgl ) Detector.addGetWebGLMessage();
var renderer; 
var texture; 
var scene;     
var camera;   
var controls;
var axes;
var model; 
var container;
var rotateX = 0;   
var rotateY = 0;

init();</code></pre>
<p>The first important code is called by the <code>init()</code> function. This code creates the director&#8217;s camera; the user is like a film director. The camera is the amount, perspective, and angle of the 3D scene displayed on the screen. The camera is controlled by a control object which allows the user to interact via the keyboard and mouse. To display anything, a scene needs to be created. Objects need to be added to the scene in order for them to become visible. The renderer does all the work to actually turn the code objects, numbers, and interactions into colors and shapes displayed on the screen via the device&#8217;s graphics card and WebGL.</p>
<p>In order to draw a 3D contour, a set of geometric data needs to be created. The data defines vertices and faces of polygons which tell Three.js how to draw a shape. The Bubble Index 3D Contour displays parallel time-series by first turning them into a set of X,Y,Z coordinates. It then sends these coordinates to <a href="http://3dfmaps.com/index.htm" target="_blank">3DFieldPro</a> which outputs a dxf AutoCAD file. The dxf file is then converted into a Three.js JSON 3D data structure via the <a href="http://www.johannes-raida.de/jnetcad.htm" target="_blank">JNetCAD</a> program. Thus, with the JSON data created, the <code>THREE.JSONLoader()</code> provides a convenient way to load and display the 3D contour data.</p>
<p>In future posts, the <code>addAxesAndText()</code> and <code>addTimeSeries()</code> functions will be discussed. They simply add the axes and the price data time-series to the display.</p>
<p>Finally, the renderer needs to be added to the HTML DOM. A window listener function is created to provide a means to redraw the display in the case of a resize of the browser.</p>
<pre><code>function init() {
    camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.z = 35;
    camera.up.set( 0, 0, 1 );
    controls = new THREE.OrbitControls( camera );
    controls.damping = 0.5;
    controls.addEventListener( 'change', render );
    scene = new THREE.Scene();
    renderer = new THREE.WebGLRenderer( {  antialias: true   } );
    renderer.setPixelRatio( window.devicePixelRatio );
    renderer.setSize( window.innerWidth, window.innerHeight );
    renderer.setClearColor(0);
    var loader = new THREE.JSONLoader();
    loader.load('AA.BA.json', modelLoadedCallback);

    addAxesAndText();
    addTimeSeries();

    container = document.getElementById( 'container' );
    container.appendChild( renderer.domElement );
    window.addEventListener( 'resize', onWindowResize, false );
    animate();
 }</code></pre>

							</div><!-- .entry-content -->
					</div>
	</div>
</article><!-- #post-## -->

<article id="post-690" class="post-690 post type-post status-publish format-standard hentry category-code category-d3 category-programming category-website">
	<div class="blog-item-wrap">
				<a href="https://lpplmarketwatch.com/2015/07/30/d3-js-multiple-line-plot-part-6/" title="D3.js Multiple Line Plot &#8211; Part 6" >
							</a>
		<div class="post-inner-content">
			<header class="entry-header page-header">

				<h2 class="entry-title"><a href="https://lpplmarketwatch.com/2015/07/30/d3-js-multiple-line-plot-part-6/" rel="bookmark">D3.js Multiple Line Plot &#8211; Part 6</a></h2>

								<div class="entry-meta">
					<span class="posted-on"><i class="fa fa-calendar"></i> <a href="https://lpplmarketwatch.com/2015/07/30/d3-js-multiple-line-plot-part-6/" rel="bookmark"><time class="entry-date published" datetime="2015-07-30T02:32:54+00:00">July 30, 2015</time></a></span><span class="byline"> <i class="fa fa-user"></i> <span class="author vcard"><a class="url fn n" href="https://lpplmarketwatch.com/author/lpplmarketwatch/">lpplmarketwatch</a></span></span>				<span class="comments-link"><i class="fa fa-comment-o"></i><a href="https://lpplmarketwatch.com/2015/07/30/d3-js-multiple-line-plot-part-6/#respond">Leave a comment</a></span>
				
				
				</div><!-- .entry-meta -->
							</header><!-- .entry-header -->

						<div class="entry-content">

				<p>Working version of the plot, download <a href="https://cdn.thebubbleindex.com/Docs/plot_working_07272015.zip">here</a>.</p>
<p>This final post describes the code which needs to be executed after any time-series has been added or removed. When a time-series has been added or removed via the legend button, it is possible that its unique range of y-values is not currently displayed in the plot. For instance, assume the &#8220;52 Days&#8221; and &#8220;104 Days&#8221; time-series are currently displayed and the y-range is: [0 &#8211; 123]. Now, the &#8220;2520 Days&#8221; time-series is added by a mouse click. This time series has y-values in the range [420 &#8211; 540]. Thus, the new range [0 &#8211; 540] needs to be established as the new y-axis. However, all the time-series displayed &#8220;pre-click&#8221; (52 and 104 Days) will need to be removed and re-drawn since their paths are scaled based on the [0 &#8211; 123] range of y-values. As seen in <a href="https://lpplmarketwatch.com/2015/07/d3-js-multiple-line-plot-part-4/" target="_blank">part 4</a>, if the legend button is black with a strike-through, the <code>addWindow()</code> function is called:</p>
<pre><code>function addWindow(name, addAllBoolean, updateBoolean, longTransition) {
    var transition = longTransition ? 500 : 0;
    if (svg.selectAll(".index").empty() || !svg.selectAll(".index").classed("a" + name) || updateBoolean) {
        var idName = name.toString();
        var tempIndex = svg.selectAll(".aaa")
            .data(indices.filter(function(d) {
                return d.name == idName;
            }))
            .enter().append("g")
            .attr("id", function(d) {
                return "index" + d.name;
            })
            .attr("class", function(d) {
                return "index a" + d.name;
            });
        if (!addAllBoolean) {
            var displayedIndices = d3.selectAll(".index").data();
            y.domain([
                d3.min(displayedIndices, function(c) {
                    return d3.min(c.values, function(v) {
                        return v.yvalue;
                    });
                }),
                d3.max(displayedIndices, function(c) {
                    return d3.max(c.values, function(v) {
                        return v.yvalue;
                    });
                })
            ]);
            svg.select(".y.axis")
                .call(yAxis);
            d3.selectAll(".index").data().forEach(function(d) {
                removeWindow(d.name, false, false);
                (d.name == name) ? addWindow(d.name, true, true, true): addWindow(d.name, true, true, false);

            });
        }
        tempIndex.append("path")
            .attr("class", "line")
            .attr("d", function(d) {
                return line(d.values);
            })
            .style("opacity", 0.0)
            .style("stroke", function(d) {
                return color(d.name);
            })
            .transition()
            .style("opacity", 1.0)
            .duration(transition);
    }
}
</code></pre>
<p>As can be seen by the <code>addWindow()</code> function, in order to add a window, all previous windows need to be removed. If the window is currently displayed, it can be removed with a mouse click. There are two types of <code>addWindow()</code> and <code>removeWindow()</code> function calls. The logic is based on various boolean values. This is needed because of the &#8220;Add All&#8221; and &#8220;Remove All&#8221; buttons. These buttons require a different logic than the case of a single time-series being added or removed. Presented below is the <code>removeWindow()</code> function:</p>
<pre><code>function removeWindow(name, longTransitionBoolean, firstClick) {
    var transition = longTransitionBoolean ? 500 : 0;
    var idName = "#index" + name.toString();
    d3.select(idName)
        .transition()
        .style("opacity", 0.0)
        .duration(transition)
        .remove().each("end", function() {
            if (firstClick) {
                var displayedIndices = d3.selectAll(".index").data();
                if (!d3.selectAll(".index").empty()) {
                    y.domain([
                        d3.min(displayedIndices, function(c) {
                            return d3.min(c.values, function(v) {
                                return v.yvalue;
                            });
                        }),
                        d3.max(displayedIndices, function(c) {
                            return d3.max(c.values, function(v) {
                                return v.yvalue;
                            });
                        })
                    ]);
                    svg.select(".y.axis")
                        .call(yAxis);
                    d3.selectAll(".index").data().forEach(function(d) {
                        removeWindow(d.name, false, false);
                        addWindow(d.name, true, true, false);

                    });
                    addMouse();
                }
            }
        });</code></pre>
<p>In each of these functions, the D3 transition function is called in order to make the addition and remove of the time-series lines smooth.<br />
This concludes the posts concerning drawing multiple line plots with mouse interaction in D3.js. Hope this helps!</p>

							</div><!-- .entry-content -->
					</div>
	</div>
</article><!-- #post-## -->

<article id="post-678" class="post-678 post type-post status-publish format-standard hentry category-code category-d3 category-programming category-website">
	<div class="blog-item-wrap">
				<a href="https://lpplmarketwatch.com/2015/07/29/d3-js-multiple-line-plot-part-5/" title="D3.js Multiple Line Plot &#8211; Part 5" >
							</a>
		<div class="post-inner-content">
			<header class="entry-header page-header">

				<h2 class="entry-title"><a href="https://lpplmarketwatch.com/2015/07/29/d3-js-multiple-line-plot-part-5/" rel="bookmark">D3.js Multiple Line Plot &#8211; Part 5</a></h2>

								<div class="entry-meta">
					<span class="posted-on"><i class="fa fa-calendar"></i> <a href="https://lpplmarketwatch.com/2015/07/29/d3-js-multiple-line-plot-part-5/" rel="bookmark"><time class="entry-date published" datetime="2015-07-29T01:23:44+00:00">July 29, 2015</time></a></span><span class="byline"> <i class="fa fa-user"></i> <span class="author vcard"><a class="url fn n" href="https://lpplmarketwatch.com/author/lpplmarketwatch/">lpplmarketwatch</a></span></span>				<span class="comments-link"><i class="fa fa-comment-o"></i><a href="https://lpplmarketwatch.com/2015/07/29/d3-js-multiple-line-plot-part-5/#respond">Leave a comment</a></span>
				
				
				</div><!-- .entry-meta -->
							</header><!-- .entry-header -->

						<div class="entry-content">

				<p>Working version of the plot, download <a href="https://cdn.thebubbleindex.com/Docs/plot_working_07272015.zip">here</a>.</p>
<p>The D3 function, <code>d3.mouse()</code>, provides a convenient tool for tracking the movement of the mouse as the user interacts with the plot. The nearest time x-value is determined and used to display the corresponding y-values for each time-series displayed. The <code>mousemove()</code> function was initialized in <a href="https://lpplmarketwatch.com/2015/07/d3-multiple-line-plot-part-1/" target="_blank">part 1</a> as follows:</p>
<pre><code>function mousemove() {
    var x0 = x.invert(d3.mouse(d3.select("#svgMain").node())[0]);
    var i = bisectDate(origData, x0, 1);
    d3.selectAll(".index").data().forEach(function(d) {
        var d0 = d.values[i - 1],
            d1 = d.values[i],
            p = x0 - d0.date &gt; d1.date - x0 ? d1 : d0;
        var x_new = x(p.date),
            y_new = y(p.yvalue);
        svg.select("#focus" + d.name).attr("transform", "translate(" + x_new + "," + y_new + ")");
        svg.select("#numtext" + d.name).text(p.yvalue);
				svg.select("#datetext").text(dateDisplayFormat(p.date));
    });
}
</code></pre>
<p>The code in <a href="https://lpplmarketwatch.com/2015/07/d3-js-multiple-line-plot-part-4/" target="_blank">part 4</a> displayed where the mousemove() function is first called.</p>
<p>Next, add html and svg elements which draw circles and append text to the plot display at the location and value of the data points. These objects will follow the movement of the mouse. The location of the nearest Date will be fixed in the top center of the plot; its value will change accordingly as the mouse moves. Each time-series line currently displayed on the plot will need to have a &#8220;rect&#8221; appended to it, as shown below:</p>
<pre><code>var addMouse = function() {
    focus = svg.selectAll(".index").append("g")
        .attr("id", function(d) {
            return "focus" + d.name;
        })
        .attr("class", function(d) {
            return "focus " + d.name;
        })
        .style("display", "none");
    focus.append("circle")
        .attr("id", function(d) {
            return "circle" + d.name;
        })
        .attr("r", 4.5);
    focus.append("text")
        .attr("id", function(d) {
            return "numtext" + d.name;
        })
        .attr("x", 9)
        .attr("dy", "-0.5em");
    svg.append("text")
        .attr("id", "datetext")
        .attr("x", width / 2);
    svg.selectAll(".index").append("rect")
        .attr("class", function(d) {
            return "overlay " + d.name;
        })
        .attr("width", width)
        .attr("height", height)
        .on("mouseover", function() {
            focus.style("display", null);
        })
        .on("mouseout", function() {
            focus.style("display", "none");
        })
        .on("mousemove", mousemove);
}
</code></pre>
<p>The circles that trace the multiple plot lines will appear and disappear as the mouse moves onto and off the plot. This is associated with the following CSS style code:</p>
<pre><code>.overlay {
  fill: none;
  pointer-events: all;
}
.focus circle {
  fill: none;
  stroke: steelblue;
}
</code></pre>

							</div><!-- .entry-content -->
					</div>
	</div>
</article><!-- #post-## -->

<article id="post-661" class="post-661 post type-post status-publish format-standard hentry category-code category-d3 category-programming category-website">
	<div class="blog-item-wrap">
				<a href="https://lpplmarketwatch.com/2015/07/28/d3-js-multiple-line-plot-part-4/" title="D3.js Multiple Line Plot &#8211; Part 4" >
							</a>
		<div class="post-inner-content">
			<header class="entry-header page-header">

				<h2 class="entry-title"><a href="https://lpplmarketwatch.com/2015/07/28/d3-js-multiple-line-plot-part-4/" rel="bookmark">D3.js Multiple Line Plot &#8211; Part 4</a></h2>

								<div class="entry-meta">
					<span class="posted-on"><i class="fa fa-calendar"></i> <a href="https://lpplmarketwatch.com/2015/07/28/d3-js-multiple-line-plot-part-4/" rel="bookmark"><time class="entry-date published" datetime="2015-07-28T00:47:31+00:00">July 28, 2015</time></a></span><span class="byline"> <i class="fa fa-user"></i> <span class="author vcard"><a class="url fn n" href="https://lpplmarketwatch.com/author/lpplmarketwatch/">lpplmarketwatch</a></span></span>				<span class="comments-link"><i class="fa fa-comment-o"></i><a href="https://lpplmarketwatch.com/2015/07/28/d3-js-multiple-line-plot-part-4/#respond">Leave a comment</a></span>
				
				
				</div><!-- .entry-meta -->
							</header><!-- .entry-header -->

						<div class="entry-content">

				<p>Working version of the plot, download <a href="https://cdn.thebubbleindex.com/Docs/plot_working_07272015.zip">here</a>.</p>
<p>This post discusses the code responsible for creating an interactive legend for a multiple line plot &#8212; as seen on the Plot page of The Bubble Index. The legend will be located below the plot. In order to create an area to contain room for the legend&#8217;s text, the plot display must not fill the entire height of the svg object. As seen in <a href="https://lpplmarketwatch.com/2015/07/d3-multiple-line-plot-part-1/" target="_blank">part 1</a>, the plot has a bottom margin of size 100 and a top margin of size 20. This allows space for a legend to span the area below the plot.</p>
<pre><code>var maxPerRow = Math.ceil(indices.length / 2);
var legendSpace = width / maxPerRow;</code></pre>
<p>The code assumes that two rows will be enough to display all the time-series labels, including an &#8220;Add All&#8221; and &#8220;Remove All&#8221; button.</p>
<p>The &#8220;Add All&#8221; feature will add every time-series contained in the original data to the plot. It is like a plot &#8220;reset.&#8221; Whatever is currently displayed will be removed. Thus, the y-axis will need to be re-scaled to fit the original range of data.</p>
<pre><code>svg.append("text")
    .attr("x", 0)
    .attr("y", height + (margin.bottom / 2) + 15)
    .attr("class", "legend addAll")
    .style("fill", "red")
    .text("Add All")
    .on("click", function() {
        d3.selectAll(".index").data().forEach(function(d) {
            removeWindow(d.name, false, false);
        });
        y.domain([
            d3.min(indices, function(c) {
                return d3.min(c.values, function(v) {
                    return v.yvalue;
                });
            }),
            d3.max(indices, function(c) {
                return d3.max(c.values, function(v) {
                    return v.yvalue;
                });
            })
        ]);
        svg.select(".y.axis")
            .call(yAxis);
        indices.forEach(function(d, i) {
            var myID = "legend" + d.name;
            var selection = d3.select("#" + myID);
            if (selection.attr("class") == "legend-clicked") {
                selection.style("fill", color(d.name)).attr("class", "legend " + d.name);
                addWindow(d.name, true, false, true);
            }
        });
        addMouse();
    });</code></pre>
<p>The &#8220;Remove All&#8221; feature will remove all time-series currently displayed in the plot. Note: while writing this, I noticed it may not be necessary to re-scale the y-axis.</p>
<pre><code>svg.append("text")
    .attr("x", 0)
    .attr("y", height + (margin.bottom / 2) + 45)
    .attr("class", "legend removeAll")
    .style("fill", "red")
    .text("Remove All")
    .on("click", function() {
        indices.forEach(function(d, i) {
            var myID = "legend" + d.name;
            var selection = d3.select("#" + myID);
            selection.style("fill", "black").attr("class", "legend-clicked");
            removeWindow(d.name, true, false);
        });
        var displayedIndices = d3.selectAll(".index").data();
        y.domain([
            d3.min(displayedIndices, function(c) {
                return d3.min(c.values, function(v) {
                    return v.yvalue;
                });
            }),
            d3.max(displayedIndices, function(c) {
                return d3.max(c.values, function(v) {
                    return v.yvalue;
                });
            })
        ]);
        svg.select(".y.axis")
            .call(yAxis);
    });
</code></pre>
<p>At this point in the code, the function which creates a mouse-over interaction is called. The mouse-over function will be discussed in a later post.</p>
<pre><code>addMouse();
</code></pre>
<p>Next, a legend entry for each time-series is appended to the bottom of the svg plot. Note: In the HTML header, there is a CSS style sheet which contains a class for a legend element which has been clicked-on.</p>
<pre><code>.legend {
    font-size: 16px;
    font-weight: bold;
    text-anchor: middle;
    cursor:pointer;
} 

.legend-clicked {
    font-size: 16px;
    font-weight: bold;
    text-anchor: middle;
    text-decoration: line-through;
    cursor:pointer;
}</code></pre>
<p>When the user clicks on a time-series label, that particular time-series will either be removed or added, depending on the current status of that time-series. For instance, if the &#8220;52 Day&#8221; label is black and has a strike-through style, it means the time-series has been removed from the plot. Clicking on this label will add the time-series back to the plot. However, in order for this to happen, the y-axis needs to be re-scaled and all the currently displayed lines will need to be re-drawn. The functions which re-scale and update the plot will be included in a future post.</p>
<pre><code>indices.forEach(function(d, i) {
    svg.append("text")
        .attr("x", legendSpace + (i % maxPerRow) * legendSpace)
        .attr("y", (i &amp; lt; maxPerRow) ? (height + (margin.bottom / 2) + 15) : (height + (margin.bottom / 2) + 45))
        .attr("class", "legend " + d.name)
        .attr("id", "legend" + d.name)
        .style("fill", color(d.name))
        .text(d.name + " Days")
        .on("click", function() {
            var selection = d3.select(this);
            if (selection.attr("class") == "legend-clicked") {
                selection.style("fill", color(d.name)).attr("class", "legend " + d.name);
                addWindow(d.name, false, false, true);
                addMouse();
            } else {
                selection.style("fill", "black").attr("class", "legend-clicked");
                removeWindow(d.name, true, true);
            }
        });
});
</code></pre>

							</div><!-- .entry-content -->
					</div>
	</div>
</article><!-- #post-## -->

<article id="post-650" class="post-650 post type-post status-publish format-standard hentry category-code category-d3 category-programming category-website">
	<div class="blog-item-wrap">
				<a href="https://lpplmarketwatch.com/2015/07/24/d3-js-multiple-line-plot-part-3/" title="D3.js Multiple Line Plot &#8211; Part 3" >
							</a>
		<div class="post-inner-content">
			<header class="entry-header page-header">

				<h2 class="entry-title"><a href="https://lpplmarketwatch.com/2015/07/24/d3-js-multiple-line-plot-part-3/" rel="bookmark">D3.js Multiple Line Plot &#8211; Part 3</a></h2>

								<div class="entry-meta">
					<span class="posted-on"><i class="fa fa-calendar"></i> <a href="https://lpplmarketwatch.com/2015/07/24/d3-js-multiple-line-plot-part-3/" rel="bookmark"><time class="entry-date published" datetime="2015-07-24T00:53:57+00:00">July 24, 2015</time></a></span><span class="byline"> <i class="fa fa-user"></i> <span class="author vcard"><a class="url fn n" href="https://lpplmarketwatch.com/author/lpplmarketwatch/">lpplmarketwatch</a></span></span>				<span class="comments-link"><i class="fa fa-comment-o"></i><a href="https://lpplmarketwatch.com/2015/07/24/d3-js-multiple-line-plot-part-3/#respond">Leave a comment</a></span>
				
				
				</div><!-- .entry-meta -->
							</header><!-- .entry-header -->

						<div class="entry-content">

				<p>Working version of the plot, download <a href="https://cdn.thebubbleindex.com/Docs/plot_working_07272015.zip">here</a>.</p>
<p>The data is now imported and loaded into memory. The next step is to attach each time-series to the DOM as an element. Before doing that, draw the initial axes.</p>
<p>Drawing the initial axes are easy with D3. Nothing too crazy, the y-axis has the text: &#8220;Relative Power.&#8221; However, note that the y-axis has been scaled (<a href="https://lpplmarketwatch.com/2015/07/d3-js-multiple-line-plot-part-2/" target="_blank">part 2</a>) based on all the time-series. If a single time-series is removed, the y-axis should be re-scaled and re-drawn. The entire plot will also have to be re-drawn. Removing and added lines will be the subject of later posts.</p>
<pre><code>    svg.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + height + ")")
        .call(xAxis);

    svg.append("g")
        .attr("class", "y axis")
        .attr("transform", "translate(" + width + " ,0)")
        .call(yAxis)
        .append("text")
        .attr("y", 6)
        .attr("dy", "-.71em")
        .style("text-anchor", "end")
        .text("Relative Power");
</code></pre>
<p>Now the initial lines can be drawn on the plot. Since the initial state of the <code>svg</code> selection contains no child elements having the &#8220;.index&#8221; keyword, the D3 selection: <code>svg.selectAll(".index")</code> will return with an empty selection. Thus, the combination of the <code>.data(indices)</code> and <code>.enter().append("g")</code> D3 functions will append a &#8220;g&#8221; element for every map key in the <code>index</code> object. Each &#8220;g&#8221; element will have an &#8220;id&#8221; and &#8220;class&#8221; based on the individual time-series &#8220;name&#8221; attribute.</p>
<p>For each time-series object attached to the <code>index</code> selection, the <code>.append("path")</code> function will create a &#8220;path&#8221; element. This path will be drawn based on the <code>values</code> entry of the individual time-series map. The <code>function(d)</code> in the D3 callback of <code>.attr()</code> implicitly iterates over all key-pairs in the <code>index</code> selection and all key-pair in each time-series. The <code>line</code> and <code>color</code> functions were initialized in <a href="https://lpplmarketwatch.com/2015/07/d3-multiple-line-plot-part-1/" target="_blank">part 1</a>.</p>
<pre><code>    index = svg.selectAll(".index")
        .data(indices)
        .enter().append("g")
        .attr("id", function(d) {
            return "index" + d.name;
        })
        .attr("class", function(d) {
            return "index a" + d.name;
        });

    index.append("path")
        .attr("class", "line")
        .attr("d", function(d) {
            return line(d.values);
        })
        .style("stroke", function(d) {
            return color(d.name);
        });
</code></pre>

							</div><!-- .entry-content -->
					</div>
	</div>
</article><!-- #post-## -->

<article id="post-640" class="post-640 post type-post status-publish format-standard hentry category-code category-d3 category-programming category-website">
	<div class="blog-item-wrap">
				<a href="https://lpplmarketwatch.com/2015/07/22/d3-js-multiple-line-plot-part-2/" title="D3.js Multiple Line Plot &#8211; Part 2" >
							</a>
		<div class="post-inner-content">
			<header class="entry-header page-header">

				<h2 class="entry-title"><a href="https://lpplmarketwatch.com/2015/07/22/d3-js-multiple-line-plot-part-2/" rel="bookmark">D3.js Multiple Line Plot &#8211; Part 2</a></h2>

								<div class="entry-meta">
					<span class="posted-on"><i class="fa fa-calendar"></i> <a href="https://lpplmarketwatch.com/2015/07/22/d3-js-multiple-line-plot-part-2/" rel="bookmark"><time class="entry-date published" datetime="2015-07-22T01:01:29+00:00">July 22, 2015</time></a></span><span class="byline"> <i class="fa fa-user"></i> <span class="author vcard"><a class="url fn n" href="https://lpplmarketwatch.com/author/lpplmarketwatch/">lpplmarketwatch</a></span></span>				<span class="comments-link"><i class="fa fa-comment-o"></i><a href="https://lpplmarketwatch.com/2015/07/22/d3-js-multiple-line-plot-part-2/#respond">Leave a comment</a></span>
				
				
				</div><!-- .entry-meta -->
							</header><!-- .entry-header -->

						<div class="entry-content">

				<p>Working version of the plot, download <a href="https://cdn.thebubbleindex.com/Docs/plot_working_07272015.zip">here</a>.</p>
<p>As mentioned before, the following code is presented &#8220;as it is&#8221; in its current version. Some functions and variables are presented out of order.</p>
<p>The SVG variable is created by a D3 selection. The &#8220;plotarea&#8221; &lt;div&gt; is selected as the element where the SVG plot will be created. A &#8220;g&#8221; element is appended to the plot. This will allow the time-series to be grouped together as a single object.</p>
<pre><code>var svg = d3.select("#plotarea").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")")
    .attr("id", "svgMain");
</code></pre>
<p>The source data is of course the most important piece in the puzzle. In order to create an SVG plot containing multiple lines which each share the same set of dates, make sure that the data is formatted and aligned correctly. For instance, create a tab-separated file which contains a header entry for each column. And make sure each row contains an entry for each column. Thus, if no data is available for a specific date and column, place a value of 0, ensuring no gaps in the data. However, depending on the structure of the data, this may not work for all applications.</p>
<p>An example header for the tsv file: &#8220;date 52 Days 104 Days 153 Days 256 Days 512 Days&#8221;, where each &#8220;# Days&#8221; entry is separated by a tab.</p>
<p>Example:</p>
<pre><code>date    52 Days    104 Days
2015-05-01    52.0    102.0
2015-05-02    54.0    104.0
</code></pre>
<p>D3 has a function called &#8220;d3.tsv&#8221; which easily requests and loads a tab-separated file into the browser memory.</p>
<p>Once this raw data has been loaded, the &#8220;d3.tsv&#8221; function enters a callback. This is where the data is parsed, turned into SVG objects, and loaded into a DOM element.</p>
<p>Since there are multiple time-series, there will be a separate map for each column. The &#8220;indices&#8221; variable contains the separate time-series as a key-value pair mapping in memory. Each column header (i.e. 52 Days) is the key for a time-series. The value entry of the &#8220;indices&#8221; map is itself another map object. This additional map object will have a set of key-value pairs between dates and numerical values. Thus, if there are 5 column headers (excluding the date column) then the &#8220;indices&#8221; object will have 5 keys. And, if there are 252 date rows, each map associated with each one of the 5 keys will have 252 date keys.</p>
<p>Once the data is stored as a map, the D3 &#8220;domain&#8221; functions &#8212; in combination with the D3 max and min functions &#8212; will determine the numerical and time-line ranges of ALL the time-series data.</p>
<pre><code>d3.tsv("data-location_name.tsv", function(error, data) {
    color.domain(d3.keys(data[0]).filter(function(key) {
        return key !== "date";
    }));

    data.forEach(function(d) {
        d.date = parseDate(d.date);
    });

    indices = color.domain().map(function(name) {
        return {
            name: name.substring(0, name.indexOf(" Days")),
            values: data.map(function(d) {
                return {
                    date: d.date,
                    yvalue: +d[name]
                };
            })
        };
    });
    origData = data;
    x.domain(d3.extent(data, function(d) {
        return d.date;
    }));

    y.domain([
        d3.min(indices, function(c) {
            return d3.min(c.values, function(v) {
                return v.yvalue;
            });
        }),
        d3.max(indices, function(c) {
            return d3.max(c.values, function(v) {
                return v.yvalue;
            });
        })
    ]);
</code></pre>

							</div><!-- .entry-content -->
					</div>
	</div>
</article><!-- #post-## -->

<article id="post-627" class="post-627 post type-post status-publish format-standard hentry category-code category-d3 category-programming category-website">
	<div class="blog-item-wrap">
				<a href="https://lpplmarketwatch.com/2015/07/21/d3-multiple-line-plot-part-1/" title="D3.js Multiple Line Plot &#8211; Part 1" >
							</a>
		<div class="post-inner-content">
			<header class="entry-header page-header">

				<h2 class="entry-title"><a href="https://lpplmarketwatch.com/2015/07/21/d3-multiple-line-plot-part-1/" rel="bookmark">D3.js Multiple Line Plot &#8211; Part 1</a></h2>

								<div class="entry-meta">
					<span class="posted-on"><i class="fa fa-calendar"></i> <a href="https://lpplmarketwatch.com/2015/07/21/d3-multiple-line-plot-part-1/" rel="bookmark"><time class="entry-date published" datetime="2015-07-21T01:46:08+00:00">July 21, 2015</time></a></span><span class="byline"> <i class="fa fa-user"></i> <span class="author vcard"><a class="url fn n" href="https://lpplmarketwatch.com/author/lpplmarketwatch/">lpplmarketwatch</a></span></span>				<span class="comments-link"><i class="fa fa-comment-o"></i><a href="https://lpplmarketwatch.com/2015/07/21/d3-multiple-line-plot-part-1/#respond">Leave a comment</a></span>
				
				
				</div><!-- .entry-meta -->
							</header><!-- .entry-header -->

						<div class="entry-content">

				<p>To help any one interested in creating &#8220;multi-line&#8221; or multiple line charts with D3.js, I will walk through the various steps required to create the D3 plots on The Bubble Index. There may be many places in my code which could be simplified and improved &#8212; I present the current version &#8220;as it is.&#8221;</p>
<p>Working version of the plot, download <a href="https://cdn.thebubbleindex.com/Docs/plot_working_07272015.zip">here</a>.</p>
<p>The goal is to have the SVG plot fill the width of any screen which accesses the site. The HTML code contains a &#8220;plotarea&#8221; &lt;div&gt; which has its CSS width property set to: width = 100%. Note: this uses jQuery to select the &lt;div&gt;, but certainly there are other ways to select the &lt;div&gt;. Therefore, no matter how wide the screen on the device, the &#8220;areawidth&#8221; variable will store that information. This code setup means that the &#8220;plotarea&#8221; will only resize itself after a page resize and refresh F5, which is ok for my purposes. The aspect ratio and margins are set to visually appealing values.</p>
<p>The next lines contain the following useful functions:</p>
<ul>
<li>D3 date parser to extract date objects from the time-series data</li>
<li>D3 scale functions to ensure that the time-series data for each time-series is always scaled with the SVG in the x and y directions</li>
<li>D3 line function to draw the lines on the SVG &#8212; &#8220;basis&#8221; interpolation method</li>
<li>D3 bisector function to be used in coordination with mouse-over events to determine the nearest &#8220;x&#8221; value of the current position of the cursor</li>
</ul>
<pre><code>var index;
var origData;
var indices;
var focus;
var margin = {
        top: 20,
        right: 80,
        bottom: 100,
        left: 50
    },
    aspect = 1.92,
    areawidth = $("#plotarea").width(),
    width = areawidth - margin.left - margin.right,
    height = Math.round(areawidth / aspect) - margin.top - margin.bottom;

var parseDate = d3.time.format("%Y-%m-%d").parse;

var x = d3.time.scale()
    .range([0, width]);

var y = d3.scale.linear()
    .range([height, 0]);

var color = d3.scale.category10();

var dateDisplayFormat = d3.time.format("%Y-%m-%d");

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("right");

var line = d3.svg.line()
    .interpolate("basis")
    .x(function(d) {
        return x(d.date);
    })
    .y(function(d) {
        return y(d.yvalue);
    });

var bisectDate = d3.bisector(function(d) {
    return d.date;
}).left;
</code></pre>

							</div><!-- .entry-content -->
					</div>
	</div>
</article><!-- #post-## -->

<article id="post-615" class="post-615 post type-post status-publish format-standard hentry category-asia category-china category-crash category-crisis">
	<div class="blog-item-wrap">
				<a href="https://lpplmarketwatch.com/2015/07/08/mainland-china-bubble/" title="Shenzhen and Shanghai Market Bubble" >
							</a>
		<div class="post-inner-content">
			<header class="entry-header page-header">

				<h2 class="entry-title"><a href="https://lpplmarketwatch.com/2015/07/08/mainland-china-bubble/" rel="bookmark">Shenzhen and Shanghai Market Bubble</a></h2>

								<div class="entry-meta">
					<span class="posted-on"><i class="fa fa-calendar"></i> <a href="https://lpplmarketwatch.com/2015/07/08/mainland-china-bubble/" rel="bookmark"><time class="entry-date published" datetime="2015-07-08T16:02:33+00:00">July 8, 2015</time></a></span><span class="byline"> <i class="fa fa-user"></i> <span class="author vcard"><a class="url fn n" href="https://lpplmarketwatch.com/author/lpplmarketwatch/">lpplmarketwatch</a></span></span>				<span class="comments-link"><i class="fa fa-comment-o"></i><a href="https://lpplmarketwatch.com/2015/07/08/mainland-china-bubble/#respond">Leave a comment</a></span>
				
				
				</div><!-- .entry-meta -->
							</header><!-- .entry-header -->

						<div class="entry-content">

				<p>The screenshots below were taken from The Bubble Index Plot from the most recent update, July 5, 2015. The bubble in the Chinese mainland shares was noticable. The short term windows show rapid increases starting in December 2014. The China 50 and China 95 plots are the composite indices formed by calculating the 50% and 95% distribution value of the daily values for The Bubble Index for all stocks monitored on both the Shenzhen and Shanghai exchanges.</p>
<figure id="attachment_618" class="thumbnail wp-caption alignnone" style="width: 310px"><a href="https://cdn.thebubbleindex.com/Blog/china95.png"><img class="wp-image-618 size-medium" src="https://lpplmarketwatch.com/wp-content/uploads/2015/07/china95-300x168.png" alt="The Bubble Index Composite: China 95%" width="300" height="168" /></a><figcaption class="caption wp-caption-text">The Bubble Index Composite: China 95%</figcaption></figure>
<figure id="attachment_617" class="thumbnail wp-caption alignnone" style="width: 310px"><a href="https://cdn.thebubbleindex.com/Blog/china50.png"><img class="wp-image-617 size-medium" src="https://lpplmarketwatch.com/wp-content/uploads/2015/07/china50-300x168.png" alt="The Bubble Index Composite: China 50%" width="300" height="168" /></a><figcaption class="caption wp-caption-text">The Bubble Index Composite: China 50%</figcaption></figure>
<figure id="attachment_616" class="thumbnail wp-caption alignnone" style="width: 310px"><a href="https://cdn.thebubbleindex.com/Blog/000001.png"><img class="wp-image-616 size-medium" src="https://lpplmarketwatch.com/wp-content/uploads/2015/07/000001-300x168.png" alt="The Bubble Index: 000001.SS" width="300" height="168" /></a><figcaption class="caption wp-caption-text">The Bubble Index: 000001.SS</figcaption></figure>

							</div><!-- .entry-content -->
					</div>
	</div>
</article><!-- #post-## -->

<article id="post-608" class="post-608 post type-post status-publish format-standard hentry category-programming category-website">
	<div class="blog-item-wrap">
				<a href="https://lpplmarketwatch.com/2015/05/31/website-update/" title="Website Update" >
							</a>
		<div class="post-inner-content">
			<header class="entry-header page-header">

				<h2 class="entry-title"><a href="https://lpplmarketwatch.com/2015/05/31/website-update/" rel="bookmark">Website Update</a></h2>

								<div class="entry-meta">
					<span class="posted-on"><i class="fa fa-calendar"></i> <a href="https://lpplmarketwatch.com/2015/05/31/website-update/" rel="bookmark"><time class="entry-date published" datetime="2015-05-31T13:24:05+00:00">May 31, 2015</time></a></span><span class="byline"> <i class="fa fa-user"></i> <span class="author vcard"><a class="url fn n" href="https://lpplmarketwatch.com/author/lpplmarketwatch/">lpplmarketwatch</a></span></span>				<span class="comments-link"><i class="fa fa-comment-o"></i><a href="https://lpplmarketwatch.com/2015/05/31/website-update/#respond">Leave a comment</a></span>
				
				
				</div><!-- .entry-meta -->
							</header><!-- .entry-header -->

						<div class="entry-content">

				<p>In the next couple of days I will have the code/scripts ready to batch create 3D contour maps in Three.js for all the thousands of currently monitored markets and stocks. They will then be updated on a weekly basis.</p>
<p>Also, with the help of D3.js in Action by Elijah Meeks I will change and improve the current D3 data graph. If there are any suggestions please leave a comment. My plan is to have the data available for 15 or more windows via a legend/check box/drop-down menu; the user will be able to select/choose which windows he/she wants plotted on the D3 graph. For examples and potential ideas: <a href="https://github.com/mbostock/d3/wiki/Gallery" target="_blank">D3 Examples</a>. I thinkÂ this one would be good for the site: <a href="http://charts.animateddata.co.uk/uktemperaturelines/" target="_blank">UK Temperature History</a>.</p>

							</div><!-- .entry-content -->
					</div>
	</div>
</article><!-- #post-## -->

<article id="post-590" class="post-590 post type-post status-publish format-standard hentry category-thoughts category-vernadsky">
	<div class="blog-item-wrap">
				<a href="https://lpplmarketwatch.com/2015/04/12/lppl-oscillations-as-vernadskys-pressure-of-life-for-homo-sapiens/" title="LPPL Oscillations as Vernadsky&#8217;s &#8220;Pressure of Life&#8221;" >
							</a>
		<div class="post-inner-content">
			<header class="entry-header page-header">

				<h2 class="entry-title"><a href="https://lpplmarketwatch.com/2015/04/12/lppl-oscillations-as-vernadskys-pressure-of-life-for-homo-sapiens/" rel="bookmark">LPPL Oscillations as Vernadsky&#8217;s &#8220;Pressure of Life&#8221;</a></h2>

								<div class="entry-meta">
					<span class="posted-on"><i class="fa fa-calendar"></i> <a href="https://lpplmarketwatch.com/2015/04/12/lppl-oscillations-as-vernadskys-pressure-of-life-for-homo-sapiens/" rel="bookmark"><time class="entry-date published" datetime="2015-04-12T19:30:02+00:00">April 12, 2015</time></a></span><span class="byline"> <i class="fa fa-user"></i> <span class="author vcard"><a class="url fn n" href="https://lpplmarketwatch.com/author/lpplmarketwatch/">lpplmarketwatch</a></span></span>				<span class="comments-link"><i class="fa fa-comment-o"></i><a href="https://lpplmarketwatch.com/2015/04/12/lppl-oscillations-as-vernadskys-pressure-of-life-for-homo-sapiens/#respond">Leave a comment</a></span>
				
				
				</div><!-- .entry-meta -->
							</header><!-- .entry-header -->

						<div class="entry-content">

				<p>The H,Q derivative approach taken by The Bubble Index was developed from the paper,Â <a href="//arxiv.org/abs/cond-mat/0201458" target="_blank">Generalized q-Analysis of Log-Periodicity: Applications to Critical Ruptures</a> byÂ Wei-Xing Zhou and Didier Sornette. This approach has its origin inÂ studying the critical ruptures arising in pressure storage tanks. Pressure and LPPL Oscillations are connected.Â This implies the existence of some sort of pressure build-upÂ which occursÂ in financial markets which createÂ LPPL Oscillations. What is this pressure mechanism?</p>
<p>I wonder if The Bubble Index (and LPPL Oscillations in general), might be measuring directly/indirectly the Vernadskian &#8220;pressure of life&#8221; exerted by individual socialÂ groups of H. sapiensÂ on the biosphere. This scale-free &#8220;pressure of life&#8221; exerted by these groups of H. sapiens on the environment builds over time, until it reaches aÂ critical point when the systemÂ ruptures. A crash in wealth and a shock to economic growthÂ occurs toÂ relieve the pressure which inevitably results in a depression/recession as the &#8220;pressure of life&#8221; exerted by H. sapiens beginsÂ to find a new state.</p>
<p>Growth is a double edged sword &#8211; creatingÂ pressure on the biosphere while increasing the prosperity of H. sapiens in aggregate. However, if this pressure can now be directly/indirectly measured, the interaction between H. sapiensÂ and the biosphere can be engineered. It is possible that the prosperity of H. sapiens can be designed to increase with a simultaneousÂ reduction in pressure exerted on the biosphere.</p>

							</div><!-- .entry-content -->
					</div>
	</div>
</article><!-- #post-## -->

	<nav class="navigation pagination" role="navigation">
		<h2 class="screen-reader-text">Posts navigation</h2>
		<div class="nav-links"><span aria-current='page' class='page-numbers current'>1</span>
<a class='page-numbers' href='https://lpplmarketwatch.com/page/2/'>2</a>
<span class="page-numbers dots">&hellip;</span>
<a class='page-numbers' href='https://lpplmarketwatch.com/page/11/'>11</a>
<a class="next page-numbers" href="https://lpplmarketwatch.com/page/2/">Older posts <i class="fa fa-chevron-right"></i></a></div>
	</nav>
		</main><!-- #main -->
	</div><!-- #primary -->

</div><!-- close .main-content-inner -->
<div id="secondary" class="widget-area col-sm-12 col-md-4" role="complementary">
	<div class="well">
				<aside id="search-2" class="widget widget_search">
<form role="search" method="get" class="form-search" action="https://lpplmarketwatch.com/">
  <div class="input-group">
	  <label class="screen-reader-text" for="s">Search for:</label>
	<input type="text" class="form-control search-query" placeholder="Search&hellip;" value="" name="s" title="Search for:" />
	<span class="input-group-btn">
	  <button type="submit" class="btn btn-default" name="submit" id="searchsubmit" value="Search"><span class="glyphicon glyphicon-search"></span></button>
	</span>
  </div>
</form>
</aside>		<aside id="recent-posts-2" class="widget widget_recent_entries">		<h3 class="widget-title">Recent Posts</h3>		<ul>
											<li>
					<a href="https://lpplmarketwatch.com/2015/07/31/three-js-3d-contour-plot-part-1/">Three.js 3D Contour Plot &#8211; Part 1</a>
									</li>
											<li>
					<a href="https://lpplmarketwatch.com/2015/07/30/d3-js-multiple-line-plot-part-6/">D3.js Multiple Line Plot &#8211; Part 6</a>
									</li>
											<li>
					<a href="https://lpplmarketwatch.com/2015/07/29/d3-js-multiple-line-plot-part-5/">D3.js Multiple Line Plot &#8211; Part 5</a>
									</li>
											<li>
					<a href="https://lpplmarketwatch.com/2015/07/28/d3-js-multiple-line-plot-part-4/">D3.js Multiple Line Plot &#8211; Part 4</a>
									</li>
											<li>
					<a href="https://lpplmarketwatch.com/2015/07/24/d3-js-multiple-line-plot-part-3/">D3.js Multiple Line Plot &#8211; Part 3</a>
									</li>
					</ul>
		</aside><aside id="recent-comments-2" class="widget widget_recent_comments"><h3 class="widget-title">Recent Comments</h3><ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link"><a href='https://lpplmarketwatch.com/2015/07/three-js-3d-contour-plot-part-1/' rel='external nofollow' class='url'>Three.js 3D Contour Plot &#8211; Part 1 | LPPL Market Watch</a></span> on <a href="https://lpplmarketwatch.com/3d-contour-examples/#comment-2">3D Contour Examples</a></li></ul></aside><aside id="archives-2" class="widget widget_archive"><h3 class="widget-title">Archives</h3>		<ul>
			<li><a href='https://lpplmarketwatch.com/2015/07/'>July 2015</a></li>
	<li><a href='https://lpplmarketwatch.com/2015/05/'>May 2015</a></li>
	<li><a href='https://lpplmarketwatch.com/2015/04/'>April 2015</a></li>
	<li><a href='https://lpplmarketwatch.com/2015/03/'>March 2015</a></li>
	<li><a href='https://lpplmarketwatch.com/2015/02/'>February 2015</a></li>
	<li><a href='https://lpplmarketwatch.com/2015/01/'>January 2015</a></li>
	<li><a href='https://lpplmarketwatch.com/2014/12/'>December 2014</a></li>
	<li><a href='https://lpplmarketwatch.com/2014/11/'>November 2014</a></li>
	<li><a href='https://lpplmarketwatch.com/2014/10/'>October 2014</a></li>
	<li><a href='https://lpplmarketwatch.com/2014/09/'>September 2014</a></li>
	<li><a href='https://lpplmarketwatch.com/2014/08/'>August 2014</a></li>
	<li><a href='https://lpplmarketwatch.com/2014/07/'>July 2014</a></li>
	<li><a href='https://lpplmarketwatch.com/2014/06/'>June 2014</a></li>
	<li><a href='https://lpplmarketwatch.com/2014/05/'>May 2014</a></li>
	<li><a href='https://lpplmarketwatch.com/2014/04/'>April 2014</a></li>
	<li><a href='https://lpplmarketwatch.com/2014/03/'>March 2014</a></li>
	<li><a href='https://lpplmarketwatch.com/2014/02/'>February 2014</a></li>
	<li><a href='https://lpplmarketwatch.com/2014/01/'>January 2014</a></li>
	<li><a href='https://lpplmarketwatch.com/2013/11/'>November 2013</a></li>
	<li><a href='https://lpplmarketwatch.com/2013/08/'>August 2013</a></li>
	<li><a href='https://lpplmarketwatch.com/2013/06/'>June 2013</a></li>
	<li><a href='https://lpplmarketwatch.com/2013/05/'>May 2013</a></li>
		</ul>
		</aside><aside id="categories-2" class="widget widget_categories"><h3 class="widget-title">Categories</h3>		<ul>
	<li class="cat-item cat-item-68"><a href="https://lpplmarketwatch.com/category/aex/" >aex</a>
</li>
	<li class="cat-item cat-item-69"><a href="https://lpplmarketwatch.com/category/amsterdam/" >amsterdam</a>
</li>
	<li class="cat-item cat-item-70"><a href="https://lpplmarketwatch.com/category/argentina/" >Argentina</a>
</li>
	<li class="cat-item cat-item-71"><a href="https://lpplmarketwatch.com/category/asia/" >asia</a>
</li>
	<li class="cat-item cat-item-72"><a href="https://lpplmarketwatch.com/category/bitcoin/" >bitcoin</a>
</li>
	<li class="cat-item cat-item-73"><a href="https://lpplmarketwatch.com/category/bond/" >bond</a>
</li>
	<li class="cat-item cat-item-74"><a href="https://lpplmarketwatch.com/category/bovespa/" >bovespa</a>
</li>
	<li class="cat-item cat-item-75"><a href="https://lpplmarketwatch.com/category/brazil/" >brazil</a>
</li>
	<li class="cat-item cat-item-76"><a href="https://lpplmarketwatch.com/category/bse/" >bse</a>
</li>
	<li class="cat-item cat-item-77"><a href="https://lpplmarketwatch.com/category/buenos-aires/" >Buenos aires</a>
</li>
	<li class="cat-item cat-item-78"><a href="https://lpplmarketwatch.com/category/caldaro/" >caldaro</a>
</li>
	<li class="cat-item cat-item-79"><a href="https://lpplmarketwatch.com/category/china/" >china</a>
</li>
	<li class="cat-item cat-item-80"><a href="https://lpplmarketwatch.com/category/code/" >code</a>
</li>
	<li class="cat-item cat-item-81"><a href="https://lpplmarketwatch.com/category/contour/" >contour</a>
</li>
	<li class="cat-item cat-item-82"><a href="https://lpplmarketwatch.com/category/crash/" >crash</a>
</li>
	<li class="cat-item cat-item-83"><a href="https://lpplmarketwatch.com/category/crisis/" >crisis</a>
</li>
	<li class="cat-item cat-item-84"><a href="https://lpplmarketwatch.com/category/currency/" >currency</a>
</li>
	<li class="cat-item cat-item-85"><a href="https://lpplmarketwatch.com/category/d3/" >d3</a>
</li>
	<li class="cat-item cat-item-86"><a href="https://lpplmarketwatch.com/category/daneric/" >daneric</a>
</li>
	<li class="cat-item cat-item-87"><a href="https://lpplmarketwatch.com/category/dax/" >dax</a>
</li>
	<li class="cat-item cat-item-88"><a href="https://lpplmarketwatch.com/category/didier-sornette/" >didier sornette</a>
</li>
	<li class="cat-item cat-item-89"><a href="https://lpplmarketwatch.com/category/dollar/" >dollar</a>
</li>
	<li class="cat-item cat-item-90"><a href="https://lpplmarketwatch.com/category/dow-jones/" >dow jones</a>
</li>
	<li class="cat-item cat-item-91"><a href="https://lpplmarketwatch.com/category/dutch/" >dutch</a>
</li>
	<li class="cat-item cat-item-92"><a href="https://lpplmarketwatch.com/category/elliott-waves/" >elliott waves</a>
</li>
	<li class="cat-item cat-item-93"><a href="https://lpplmarketwatch.com/category/euro/" >euro</a>
</li>
	<li class="cat-item cat-item-94"><a href="https://lpplmarketwatch.com/category/europe/" >europe</a>
</li>
	<li class="cat-item cat-item-95"><a href="https://lpplmarketwatch.com/category/ftse/" >ftse</a>
</li>
	<li class="cat-item cat-item-96"><a href="https://lpplmarketwatch.com/category/germany/" >germany</a>
</li>
	<li class="cat-item cat-item-97"><a href="https://lpplmarketwatch.com/category/gold/" >gold</a>
</li>
	<li class="cat-item cat-item-98"><a href="https://lpplmarketwatch.com/category/hang-seng/" >hang seng</a>
</li>
	<li class="cat-item cat-item-99"><a href="https://lpplmarketwatch.com/category/historical/" >historical</a>
</li>
	<li class="cat-item cat-item-100"><a href="https://lpplmarketwatch.com/category/hong-kong/" >hong kong</a>
</li>
	<li class="cat-item cat-item-101"><a href="https://lpplmarketwatch.com/category/india/" >india</a>
</li>
	<li class="cat-item cat-item-102"><a href="https://lpplmarketwatch.com/category/jakarta/" >Jakarta</a>
</li>
	<li class="cat-item cat-item-103"><a href="https://lpplmarketwatch.com/category/japan/" >japan</a>
</li>
	<li class="cat-item cat-item-104"><a href="https://lpplmarketwatch.com/category/java/" >java</a>
</li>
	<li class="cat-item cat-item-105"><a href="https://lpplmarketwatch.com/category/javacl/" >javacl</a>
</li>
	<li class="cat-item cat-item-106"><a href="https://lpplmarketwatch.com/category/jean-paul-rodrigue/" >jean-paul rodrigue</a>
</li>
	<li class="cat-item cat-item-107"><a href="https://lpplmarketwatch.com/category/jkse/" >jkse</a>
</li>
	<li class="cat-item cat-item-108"><a href="https://lpplmarketwatch.com/category/karl-marx/" >karl marx</a>
</li>
	<li class="cat-item cat-item-109"><a href="https://lpplmarketwatch.com/category/klse/" >klse</a>
</li>
	<li class="cat-item cat-item-110"><a href="https://lpplmarketwatch.com/category/kuala/" >kuala</a>
</li>
	<li class="cat-item cat-item-111"><a href="https://lpplmarketwatch.com/category/lppl/" >LPPL</a>
</li>
	<li class="cat-item cat-item-112"><a href="https://lpplmarketwatch.com/category/lumpur/" >lumpur</a>
</li>
	<li class="cat-item cat-item-113"><a href="https://lpplmarketwatch.com/category/markets/" >markets</a>
</li>
	<li class="cat-item cat-item-114"><a href="https://lpplmarketwatch.com/category/merval/" >merval</a>
</li>
	<li class="cat-item cat-item-115"><a href="https://lpplmarketwatch.com/category/nasdaq/" >nasdaq</a>
</li>
	<li class="cat-item cat-item-116"><a href="https://lpplmarketwatch.com/category/nikkei/" >nikkei</a>
</li>
	<li class="cat-item cat-item-117"><a href="https://lpplmarketwatch.com/category/programming/" >programming</a>
</li>
	<li class="cat-item cat-item-118"><a href="https://lpplmarketwatch.com/category/robert-prechter/" >robert prechter</a>
</li>
	<li class="cat-item cat-item-119"><a href="https://lpplmarketwatch.com/category/rupee/" >rupee</a>
</li>
	<li class="cat-item cat-item-120"><a href="https://lpplmarketwatch.com/category/sensex/" >sensex</a>
</li>
	<li class="cat-item cat-item-121"><a href="https://lpplmarketwatch.com/category/shanghai/" >shanghai</a>
</li>
	<li class="cat-item cat-item-122"><a href="https://lpplmarketwatch.com/category/socionomics/" >socionomics</a>
</li>
	<li class="cat-item cat-item-123"><a href="https://lpplmarketwatch.com/category/south-america/" >south america</a>
</li>
	<li class="cat-item cat-item-124"><a href="https://lpplmarketwatch.com/category/standard-and-poors/" >standard and poors</a>
</li>
	<li class="cat-item cat-item-125"><a href="https://lpplmarketwatch.com/category/thoughts/" >thoughts</a>
</li>
	<li class="cat-item cat-item-126"><a href="https://lpplmarketwatch.com/category/three-js/" >three.js</a>
</li>
	<li class="cat-item cat-item-1"><a href="https://lpplmarketwatch.com/category/uncategorized/" >Uncategorized</a>
</li>
	<li class="cat-item cat-item-127"><a href="https://lpplmarketwatch.com/category/united-states/" >united states</a>
</li>
	<li class="cat-item cat-item-128"><a href="https://lpplmarketwatch.com/category/vernadsky/" >vernadsky</a>
</li>
	<li class="cat-item cat-item-129"><a href="https://lpplmarketwatch.com/category/vienna/" >vienna</a>
</li>
	<li class="cat-item cat-item-130"><a href="https://lpplmarketwatch.com/category/website/" >website</a>
</li>
	<li class="cat-item cat-item-131"><a href="https://lpplmarketwatch.com/category/wilshire-5000/" >wilshire 5000</a>
</li>
		</ul>
</aside><aside id="meta-2" class="widget widget_meta"><h3 class="widget-title">Meta</h3>			<ul>
						<li><a href="https://lpplmarketwatch.com/wp-login.php">Log in</a></li>
			<li><a href="https://lpplmarketwatch.com/feed/">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="https://lpplmarketwatch.com/comments/feed/">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="https://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress.org</a></li>			</ul>
			</aside>	</div>
</div><!-- #secondary -->
		</div><!-- close .row -->
	</div><!-- close .container -->
</div><!-- close .site-content -->

	<div id="footer-area">
		<div class="container footer-inner">
			<div class="row">
				
				</div>
		</div>

		<footer id="colophon" class="site-footer" role="contentinfo">
			<div class="site-info container">
				<div class="row">
										<nav role="navigation" class="col-md-6">
											</nav>
					<div class="copyright col-md-6">
						sparkling						Theme by <a href="http://colorlib.com/" target="_blank">Colorlib</a> Powered by <a href="http://wordpress.org/" target="_blank">WordPress</a>					</div>
				</div>
			</div><!-- .site-info -->
			<div class="scroll-to-top"><i class="fa fa-angle-up"></i></div><!-- .scroll-to-top -->
		</footer><!-- #colophon -->
	</div>
</div><!-- #page -->

		  <script type="text/javascript">
			jQuery( document ).ready( function( $ ){
			  if ( $( window ).width() >= 767 ){
				$( '.navbar-nav > li.menu-item > a' ).click( function(){
					if( $( this ).attr('target') !== '_blank' ){
						window.location = $( this ).attr( 'href' );
					}
				});
			  }
			});
		  </script>
		<script type='text/javascript' src='https://lpplmarketwatch.com/wp-content/themes/sparkling/assets/js/skip-link-focus-fix.min.js?ver=20140222'></script>
<script type='text/javascript' src='https://lpplmarketwatch.com/wp-includes/js/wp-embed.min.js?ver=4.9.2'></script>

</body>
</html>
