<!doctype html>
<!--[if !IE]>
<html class="no-js non-ie" lang="en-US"> <![endif]-->
<!--[if IE 7 ]>
<html class="no-js ie7" lang="en-US"> <![endif]-->
<!--[if IE 8 ]>
<html class="no-js ie8" lang="en-US"> <![endif]-->
<!--[if IE 9 ]>
<html class="no-js ie9" lang="en-US"> <![endif]-->
<!--[if gt IE 9]><!-->
<html class="no-js" lang="en-US"> <!--<![endif]-->
<head>
<base href="https://lpplmarketwatch.com" />

<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="">
<link rel="profile" href="http://gmpg.org/xfn/11">

<title>D3.js Multiple Line Plot &#8211; Part 3 &#8211; LPPL Market Watch</title>
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="LPPL Market Watch &raquo; Feed" href="https://lpplmarketwatch.com/feed/" />
<link rel="alternate" type="application/rss+xml" title="LPPL Market Watch &raquo; Comments Feed" href="https://lpplmarketwatch.com/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="LPPL Market Watch &raquo; D3.js Multiple Line Plot &#8211; Part 3 Comments Feed" href="https://lpplmarketwatch.com/2015/07/24/d3-js-multiple-line-plot-part-3/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/svg\/","svgExt":".svg","source":{"concatemoji":"https:\/\/lpplmarketwatch.com\/wp-includes\/js\/wp-emoji-release.min.js"}};
			!function(a,b,c){function d(a,b){var c=String.fromCharCode;l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,a),0,0);var d=k.toDataURL();l.clearRect(0,0,k.width,k.height),l.fillText(c.apply(this,b),0,0);var e=k.toDataURL();return d===e}function e(a){var b;if(!l||!l.fillText)return!1;switch(l.textBaseline="top",l.font="600 32px Arial",a){case"flag":return!(b=d([55356,56826,55356,56819],[55356,56826,8203,55356,56819]))&&(b=d([55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447],[55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447]),!b);case"emoji":return b=d([55358,56794,8205,9794,65039],[55358,56794,8203,9794,65039]),!b}return!1}function f(a){var c=b.createElement("script");c.src=a,c.defer=c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var g,h,i,j,k=b.createElement("canvas"),l=k.getContext&&k.getContext("2d");for(j=Array("flag","emoji"),c.supports={everything:!0,everythingExceptFlag:!0},i=0;i<j.length;i++)c.supports[j[i]]=e(j[i]),c.supports.everything=c.supports.everything&&c.supports[j[i]],"flag"!==j[i]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[j[i]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(h=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1)):(a.attachEvent("onload",h),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),g=c.source||{},g.concatemoji?f(g.concatemoji):g.wpemoji&&g.twemoji&&(f(g.twemoji),f(g.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='sparkling-bootstrap-css'  href='https://lpplmarketwatch.com/wp-content/themes/sparkling/assets/css/bootstrap.min.css' type='text/css' media='all' />
<link rel='stylesheet' id='sparkling-icons-css'  href='https://lpplmarketwatch.com/wp-content/themes/sparkling/assets/css/font-awesome.min.css' type='text/css' media='all' />
<link rel='stylesheet' id='sparkling-fonts-css'  href='//fonts.googleapis.com/css?family=Open+Sans%3A400italic%2C400%2C600%2C700%7CRoboto+Slab%3A400%2C300%2C700&#038;ver=4.9.2' type='text/css' media='all' />
<link rel='stylesheet' id='sparkling-style-css'  href='https://lpplmarketwatch.com/wp-content/themes/sparkling/style.css' type='text/css' media='all' />
<script type='text/javascript' src='https://lpplmarketwatch.com/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='https://lpplmarketwatch.com/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<script type='text/javascript' src='https://lpplmarketwatch.com/wp-content/themes/sparkling/assets/js/vendor/modernizr.min.js'></script>
<script type='text/javascript' src='https://lpplmarketwatch.com/wp-content/themes/sparkling/assets/js/vendor/bootstrap.min.js'></script>
<script type='text/javascript' src='https://lpplmarketwatch.com/wp-content/themes/sparkling/assets/js/functions.min.js'></script>
<link rel='https://api.w.org/' href='https://lpplmarketwatch.com/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="https://lpplmarketwatch.com/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="https://lpplmarketwatch.com/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='D3.js Multiple Line Plot &#8211; Part 2' href='https://lpplmarketwatch.com/2015/07/22/d3-js-multiple-line-plot-part-2/' />
<link rel='next' title='D3.js Multiple Line Plot &#8211; Part 4' href='https://lpplmarketwatch.com/2015/07/28/d3-js-multiple-line-plot-part-4/' />
<meta name="generator" content="WordPress 4.9.2" />
<link rel="canonical" href="https://lpplmarketwatch.com/2015/07/24/d3-js-multiple-line-plot-part-3/" />
<link rel='shortlink' href='https://lpplmarketwatch.com/?p=650' />
<link rel="alternate" type="application/json+oembed" href="https://lpplmarketwatch.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Flpplmarketwatch.com%2F2015%2F07%2F24%2Fd3-js-multiple-line-plot-part-3%2F" />
<link rel="alternate" type="text/xml+oembed" href="https://lpplmarketwatch.com/wp-json/oembed/1.0/embed?url=http%3A%2F%2Flpplmarketwatch.com%2F2015%2F07%2F24%2Fd3-js-multiple-line-plot-part-3%2F&#038;format=xml" />
<style type="text/css"></style><link rel="pingback" href="https://lpplmarketwatch.com/xmlrpc.php">
</head>

<body class="post-template-default single single-post postid-650 single-format-standard">
<a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>
<div id="page" class="hfeed site">

	<header id="masthead" class="site-header" role="banner">
		<nav class="navbar navbar-default " role="navigation">
			<div class="container">
				<div class="row">
					<div class="site-navigation-inner col-sm-12">
						<div class="navbar-header">
							<button type="button" class="btn navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
								<span class="sr-only">Toggle navigation</span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
							</button>

														<div id="logo">
															<p class="site-name">																		<a class="navbar-brand" href="https://lpplmarketwatch.com/" title="LPPL Market Watch" rel="home">LPPL Market Watch</a>
																</p>																													</div><!-- end of #logo -->
						</div>
						<div class="collapse navbar-collapse navbar-ex1-collapse"><ul id="menu-menu-1" class="nav navbar-nav"><li id="menu-item-1481" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1481"><a href="https://lpplmarketwatch.com/3d-contour-examples/">3D Contour Examples</a></li>
<li id="menu-item-1482" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1482"><a href="https://lpplmarketwatch.com/links/">Links</a></li>
<li id="menu-item-1483" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1483"><a href="https://lpplmarketwatch.com/contact/">Contact</a></li>
<li id="menu-item-1484" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1484"><a href="https://lpplmarketwatch.com/results/">Results</a></li>
</ul></div>					</div>
				</div>
			</div>
		</nav><!-- .site-navigation -->
	</header><!-- #masthead -->

	<div id="content" class="site-content">

		<div class="top-section">
								</div>

		<div class="container main-content-area">
						<div class="row side-pull-left">
				<div class="main-content-inner col-sm-12 col-md-8">

	<div id="primary" class="content-area">
		<main id="main" class="site-main" role="main">

		<article id="post-650" class="post-650 post type-post status-publish format-standard hentry category-code category-d3 category-programming category-website">
		<div class="post-inner-content">
		<header class="entry-header page-header">

			<h1 class="entry-title ">D3.js Multiple Line Plot &#8211; Part 3</h1>

			<div class="entry-meta">
				<span class="posted-on"><i class="fa fa-calendar"></i> <a href="https://lpplmarketwatch.com/2015/07/24/d3-js-multiple-line-plot-part-3/" rel="bookmark"><time class="entry-date published" datetime="2015-07-24T00:53:57+00:00">July 24, 2015</time></a></span><span class="byline"> <i class="fa fa-user"></i> <span class="author vcard"><a class="url fn n" href="https://lpplmarketwatch.com/author/lpplmarketwatch/">lpplmarketwatch</a></span></span>
								<span class="cat-links"><i class="fa fa-folder-open-o"></i>
				 <a href="https://lpplmarketwatch.com/category/code/" rel="category tag">code</a>, <a href="https://lpplmarketwatch.com/category/d3/" rel="category tag">d3</a>, <a href="https://lpplmarketwatch.com/category/programming/" rel="category tag">programming</a>, <a href="https://lpplmarketwatch.com/category/website/" rel="category tag">website</a>				</span>
								
			</div><!-- .entry-meta -->
		</header><!-- .entry-header -->

		<div class="entry-content">
			<p>Working version of the plot, download <a href="https://cdn.thebubbleindex.com/Docs/plot_working_07272015.zip">here</a>.</p>
<p>The data is now imported and loaded into memory. The next step is to attach each time-series to the DOM as an element. Before doing that, draw the initial axes.</p>
<p>Drawing the initial axes are easy with D3. Nothing too crazy, the y-axis has the text: &#8220;Relative Power.&#8221; However, note that the y-axis has been scaled (<a href="https://lpplmarketwatch.com/2015/07/d3-js-multiple-line-plot-part-2/" target="_blank">part 2</a>) based on all the time-series. If a single time-series is removed, the y-axis should be re-scaled and re-drawn. The entire plot will also have to be re-drawn. Removing and added lines will be the subject of later posts.</p>
<pre><code>    svg.append("g")
        .attr("class", "x axis")
        .attr("transform", "translate(0," + height + ")")
        .call(xAxis);

    svg.append("g")
        .attr("class", "y axis")
        .attr("transform", "translate(" + width + " ,0)")
        .call(yAxis)
        .append("text")
        .attr("y", 6)
        .attr("dy", "-.71em")
        .style("text-anchor", "end")
        .text("Relative Power");
</code></pre>
<p>Now the initial lines can be drawn on the plot. Since the initial state of the <code>svg</code> selection contains no child elements having the &#8220;.index&#8221; keyword, the D3 selection: <code>svg.selectAll(".index")</code> will return with an empty selection. Thus, the combination of the <code>.data(indices)</code> and <code>.enter().append("g")</code> D3 functions will append a &#8220;g&#8221; element for every map key in the <code>index</code> object. Each &#8220;g&#8221; element will have an &#8220;id&#8221; and &#8220;class&#8221; based on the individual time-series &#8220;name&#8221; attribute.</p>
<p>For each time-series object attached to the <code>index</code> selection, the <code>.append("path")</code> function will create a &#8220;path&#8221; element. This path will be drawn based on the <code>values</code> entry of the individual time-series map. The <code>function(d)</code> in the D3 callback of <code>.attr()</code> implicitly iterates over all key-pairs in the <code>index</code> selection and all key-pair in each time-series. The <code>line</code> and <code>color</code> functions were initialized in <a href="https://lpplmarketwatch.com/2015/07/d3-multiple-line-plot-part-1/" target="_blank">part 1</a>.</p>
<pre><code>    index = svg.selectAll(".index")
        .data(indices)
        .enter().append("g")
        .attr("id", function(d) {
            return "index" + d.name;
        })
        .attr("class", function(d) {
            return "index a" + d.name;
        });

    index.append("path")
        .attr("class", "line")
        .attr("d", function(d) {
            return line(d.values);
        })
        .style("stroke", function(d) {
            return color(d.name);
        });
</code></pre>
					</div><!-- .entry-content -->

		<footer class="entry-meta">

			
		</footer><!-- .entry-meta -->
	</div>

	
</article><!-- #post-## -->
	
	<!-- Here we load disqus comments -->
	<div class="dcl-disqus-thread" id="comments" >
	<div id="disqus_thread">
		</div>
	</div>
	
		
			<script type="text/javascript">
	/* <![CDATA[ */
		var disqus_url = 'https://lpplmarketwatch.com/2015/07/24/d3-js-multiple-line-plot-part-3/';
		var disqus_identifier = '650 https://lpplmarketwatch.com/?p=650';
		var disqus_container_id = 'disqus_thread';
		var disqus_domain = 'disqus.com';
		var disqus_shortname = 'lpplmarketwatch';
		var disqus_title = "D3.js Multiple Line Plot &#8211; Part 3";
		var disqus_config = function () {
			var config = this; // Access to the config object
			config.language = '';

			/* Add the ability to add javascript callbacks */
			
			/*
			   All currently supported events:
				* preData â€” fires just before we request for initial data
				* preInit - fires after we get initial data but before we load any dependencies
				* onInit  - fires when all dependencies are resolved but before dtpl template is rendered
				* afterRender - fires when template is rendered but before we show it
				* onReady - everything is done
			 */

			config.callbacks.preData.push(function() {
				// clear out the container (its filled for SEO/legacy purposes)
				document.getElementById(disqus_container_id).innerHTML = '';
			});
						config.callbacks.onReady.push(function() {
				// sync comments in the background so we don't block the page
				var script = document.createElement('script');
				script.async = true;
				script.src = '?cf_action=sync_comments&post_id=650';

				var firstScript = document.getElementsByTagName( "script" )[0];
				firstScript.parentNode.insertBefore(script, firstScript);
			});
								};
	/* ]]> */
	</script>
	
		
	<script type="text/javascript">
	/* <![CDATA[ */
		var DsqLocal = {
			'trackbacks': [
				],
			'trackback_url': "https:\/\/lpplmarketwatch.com\/2015\/07\/24\/d3-js-multiple-line-plot-part-3\/trackback\/"		};
	/* ]]> */
	</script>
			
	<nav class="navigation post-navigation" role="navigation">
		<h2 class="screen-reader-text">Post navigation</h2>
		<div class="nav-links"><div class="nav-previous"><a href="https://lpplmarketwatch.com/2015/07/22/d3-js-multiple-line-plot-part-2/" rel="prev"><i class="fa fa-chevron-left"></i> <span class="post-title">D3.js Multiple Line Plot &#8211; Part 2</span></a></div><div class="nav-next"><a href="https://lpplmarketwatch.com/2015/07/28/d3-js-multiple-line-plot-part-4/" rel="next"><span class="post-title">D3.js Multiple Line Plot &#8211; Part 4 <i class="fa fa-chevron-right"></i></span></a></div></div>
	</nav>
		</main><!-- #main -->
	</div><!-- #primary -->

</div><!-- close .main-content-inner -->
<div id="secondary" class="widget-area col-sm-12 col-md-4" role="complementary">
	<div class="well">
						<aside id="recent-posts-2" class="widget widget_recent_entries">		<h3 class="widget-title">Recent Posts</h3>		<ul>
											<li>
					<a href="https://lpplmarketwatch.com/2018/02/03/bitcoin-phase-change-prediction-analysis/">Bitcoin Phase-Change Prediction Analysis</a>
									</li>
											<li>
					<a href="https://lpplmarketwatch.com/2018/02/03/mean-value-vs-window-plot/">Mean Value vs. Window &#8211; Plot</a>
									</li>
											<li>
					<a href="https://lpplmarketwatch.com/2015/07/31/three-js-3d-contour-plot-part-1/">Three.js 3D Contour Plot &#8211; Part 1</a>
									</li>
											<li>
					<a href="https://lpplmarketwatch.com/2015/07/30/d3-js-multiple-line-plot-part-6/">D3.js Multiple Line Plot &#8211; Part 6</a>
									</li>
											<li>
					<a href="https://lpplmarketwatch.com/2015/07/29/d3-js-multiple-line-plot-part-5/">D3.js Multiple Line Plot &#8211; Part 5</a>
									</li>
					</ul>
		</aside><aside id="archives-2" class="widget widget_archive"><h3 class="widget-title">Archives</h3>		<ul>
			<li><a href='https://lpplmarketwatch.com/2018/02/'>February 2018</a></li>
	<li><a href='https://lpplmarketwatch.com/2015/07/'>July 2015</a></li>
	<li><a href='https://lpplmarketwatch.com/2015/05/'>May 2015</a></li>
	<li><a href='https://lpplmarketwatch.com/2015/04/'>April 2015</a></li>
	<li><a href='https://lpplmarketwatch.com/2015/03/'>March 2015</a></li>
	<li><a href='https://lpplmarketwatch.com/2015/02/'>February 2015</a></li>
	<li><a href='https://lpplmarketwatch.com/2015/01/'>January 2015</a></li>
	<li><a href='https://lpplmarketwatch.com/2014/12/'>December 2014</a></li>
	<li><a href='https://lpplmarketwatch.com/2014/11/'>November 2014</a></li>
	<li><a href='https://lpplmarketwatch.com/2014/10/'>October 2014</a></li>
	<li><a href='https://lpplmarketwatch.com/2014/09/'>September 2014</a></li>
	<li><a href='https://lpplmarketwatch.com/2014/08/'>August 2014</a></li>
	<li><a href='https://lpplmarketwatch.com/2014/07/'>July 2014</a></li>
	<li><a href='https://lpplmarketwatch.com/2014/06/'>June 2014</a></li>
	<li><a href='https://lpplmarketwatch.com/2014/05/'>May 2014</a></li>
	<li><a href='https://lpplmarketwatch.com/2014/04/'>April 2014</a></li>
	<li><a href='https://lpplmarketwatch.com/2014/03/'>March 2014</a></li>
	<li><a href='https://lpplmarketwatch.com/2014/02/'>February 2014</a></li>
	<li><a href='https://lpplmarketwatch.com/2014/01/'>January 2014</a></li>
	<li><a href='https://lpplmarketwatch.com/2013/11/'>November 2013</a></li>
	<li><a href='https://lpplmarketwatch.com/2013/08/'>August 2013</a></li>
	<li><a href='https://lpplmarketwatch.com/2013/06/'>June 2013</a></li>
	<li><a href='https://lpplmarketwatch.com/2013/05/'>May 2013</a></li>
		</ul>
		</aside>	</div>
</div><!-- #secondary -->
		</div><!-- close .row -->
	</div><!-- close .container -->
</div><!-- close .site-content -->

	<div id="footer-area">
		<div class="container footer-inner">
			<div class="row">
				
				</div>
		</div>

		<footer id="colophon" class="site-footer" role="contentinfo">
			<div class="site-info container">
				<div class="row">
										<nav role="navigation" class="col-md-6">
											</nav>
					<div class="copyright col-md-6">
						sparkling						Theme by <a href="http://colorlib.com/" target="_blank">Colorlib</a> Powered by <a href="http://wordpress.org/" target="_blank">WordPress</a>					</div>
				</div>
			</div><!-- .site-info -->
			<div class="scroll-to-top"><i class="fa fa-angle-up"></i></div><!-- .scroll-to-top -->
		</footer><!-- #colophon -->
	</div>
</div><!-- #page -->

		  <script type="text/javascript">
			jQuery( document ).ready( function( $ ){
			  if ( $( window ).width() >= 767 ){
				$( '.navbar-nav > li.menu-item > a' ).click( function(){
					if( $( this ).attr('target') !== '_blank' ){
						window.location = $( this ).attr( 'href' );
					}
				});
			  }
			});
		  </script>
		<script type='text/javascript' src='https://lpplmarketwatch.com/wp-content/themes/sparkling/assets/js/skip-link-focus-fix.min.js?ver=20140222'></script>
<script type='text/javascript' src='https://lpplmarketwatch.com/wp-includes/js/comment-reply.min.js'></script>
<script type='text/javascript' src='https://lpplmarketwatch.com/wp-includes/js/wp-embed.min.js'></script>
<script  type="text/javascript">

    var disqus_shortname = "lpplmarketwatch";
    if (typeof ds_loaded == "undefined") {
        var ds_loaded = false;
    }
    function loadDisqus() {
        var disqus_div = document.getElementById("disqus_thread");
        var top = disqus_div.offsetTop;
        var disqus_data = disqus_div.dataset;
        if ( !ds_loaded && ( window.scrollY || window.pageYOffset ) + window.innerHeight > top ) {
            ds_loaded = true;
            for (var key in disqus_data) {
                if (key.substr(0,6) == "disqus") {
                    window["disqus_" + key.replace("disqus","").toLowerCase()] = disqus_data[key];
								}
                }
                var dsq = document.createElement("script");
                dsq.type = "text/javascript";
                dsq.async = true;
                dsq.src = "https://" + window.disqus_shortname + ".disqus.com/embed.js";
                if(document.getElementById("dcl-hidden-div")) {
                    document.getElementById("dcl-hidden-div").innerHTML = "Loading...";
                }
                (document.getElementsByTagName("head")[0] || document.getElementsByTagName("body")[0]).appendChild(dsq);
            }
        }
					var disqus_div_new = document.getElementById("disqus_thread");
		var divExists = disqus_div_new != null;
                if(document.body.scrollHeight < window.innerHeight){
                    loadDisqus();
                } else if(divExists) {
                    window.onscroll = function() { loadDisqus(); }
                }
	</script><script   type='text/javascript'>
                /* <![CDATA[ */
                var hash = window.location.hash;
                var disqus_shortname = 'lpplmarketwatch';
                if(hash!==''){
                    var ds_loaded = true;
                    var dcl_loaded = 1;
                    (function() {
                        var dsq = document.createElement('script'); dsq.type = 'text/javascript';
                        dsq.async = true;
                        dsq.src = 'https://' + disqus_shortname + '.' + 'disqus.com' + '/' + 'embed' + '.js' + '?pname=wordpress&pver=2.84';
                        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    })();}
                /* ]]> */
            </script>
</body>
</html>
